---
title: "Быстрый счётчик"
permalink: /docs/pru/examples/fast-counter/
lang: ru
excerpt: "Инструкция по созданию быстрого счётчика в Hardella IDE"
modified: 2016-12-14T22:39:43+03:00
---

Сделаем счётчик фронтов сигнала на 1-ом быстром входе.
Вспомним, что если бы это делали на «обычном цилке ПЛК», то нам не удалось бы ловить импульсы менее 1 миллисекунды. Конечно, можно просто перевести быстрый вход в режим «быстрого счётчика», но напишем такую программу на PRU -- она вполне может выступать базовым блоком для более сложных программ.

Если у вас открыта среда Hardella IDE, то можете либо
{% include ide_link addr="r:baebc184-c187-480d-b964-5b4447f7768e/5925665464103396016" text="открыть код примера в среде" %}, либо создать свой проект на основе примера (`File` > `New` > `Project` > `Fast counter`).


Укажем длительность цилка ПЛК в 1 микросекунду:

<img width="592" alt="PRU configuration" src="{{ "/assets/images/docs/pru/examples/fast-counter/pru-configuration.png" | absolute_url }}">

Таким образом, программа будет опрашивать входы не реже 1 раза в микросекунду. Т.е. можно будет уверенно ловить импульсы на частоте 250 кГц.

<img width="754" alt="Программа счётчика" src="{{ "/assets/images/docs/pru/examples/fast-counter/program.png" | absolute_url }}">

Программа счётчика нехитрая, но обратим внимание на следующее:
  1. В условии `IF` используется `R_TRIG`, но в секции объявлений переменных триггер не объявлен. Как так? Очень просто: в Hardella можно не объявлять переменные для «одноразовых» функциональных блоков.

  1. Переменная `counter` физически находится в памяти PRU, но она [отмечена на синхронизацию](/docs/pru/data-exchange/) с основным циклом ПЛК. Таким образом, результат быстрого счётчика будет доступен в основной программе на CoDeSys.
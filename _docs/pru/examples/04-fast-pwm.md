---
title: "Быстрый ШИМ"
permalink: /docs/pru/examples/fast-pwm/
lang: ru
excerpt: "Инструкция по созданию быстрого ШИМ в Hardella IDE. Hardella это среда для программирования ПЛК на языках группы 61131 (ST и т.п.)"
modified: 2016-12-25T20:49:43+03:00
---

Сделаем ШИМ сигнал на быстрых выходах.

Особенностью PRU программ является то, что нет возможности вызвать `TIME()` и узнать «текущее время». С другой стороны, сами PRU программы крайне предсказуемы. PRU ядро не занимается никакой «лишней» работой как то «обработка TCP». Поэтому можно считать, что цикл выполняется ровно указанную длительность.

Если у вас открыта среда Hardella IDE, то можете либо
{% include ide_link addr="r:df9df427-3641-4bbb-bd89-88f80031fc2f/5925665464103441990" text="открыть код примера в среде" %}, либо создать свой проект на основе примера (`File` > `New` > `Project` > `Fast counter`).

Если использовать ШИМ блок из стандартной библиотеки, то всё довольно просто:

<img width="434" alt="Программа ШИМ" src="{{ "/assets/images/docs/pru/examples/fast-pwm/program.png" | absolute_url }}">

Здесь длина периода ШИМ (`period`) и скважность (`value`) поступают из основного цилка ПЛК.

В блоке ШИМ высокой науки нет: ведём учёт количества вызовов и выставляем выходное значение `Q` в зависимости от скважности.

<img width="657" alt="Исходный код блока ШИМ" src="{{ "/assets/images/docs/pru/examples/fast-pwm/pwm-src.png" | absolute_url }}">
